# 🎬 原生 WebAV 播放器

这是一个**无需构建工具**的纯原生HTML5音视频播放器，直接在浏览器中运行，不依赖Node.js、Vite或任何打包工具。

## ✨ 特性

- 🚀 **零依赖启动** - 只需要Python 3，无需Node.js
- 🎯 **原生HTML5** - 纯JavaScript实现，无需编译
- 🖥️ **跨平台** - 支持所有现代浏览器
- 🎬 **多格式支持** - MP4, WebM, OGV等浏览器原生支持的格式
- 🔧 **环境检测** - 自动检测浏览器功能支持情况
- 📱 **响应式设计** - 适配各种屏幕尺寸

## 🚀 快速启动

### 方法1: 使用启动脚本（推荐）
```bash
./start.sh
```

### 方法2: 手动启动
```bash
python3 server.py 8080
```

### 方法3: 一键启动（如果有Python）
```bash
python3 -m http.server 8080
# 然后访问 http://localhost:8080/native-player.html
```

## 🌐 访问地址

启动后在浏览器中访问：

- **🎬 原生播放器**: http://localhost:8080/native-player.html
- **🔧 简单测试**: http://localhost:8080/simple.html  
- **📋 调试页面**: http://localhost:8080/debug.html

## 📋 系统要求

### 必需
- Python 3.x（用于HTTP服务器）
- 现代浏览器（Chrome 90+, Firefox 88+, Safari 14+, Edge 90+）

### 可选（用于高级功能）
- WebGL/WebGL2 支持（用于硬件加速渲染）
- WebGPU 支持（用于最佳性能，目前仅Chrome/Edge）
- AudioWorklet 支持（用于高质量音频处理）
- WebCodecs 支持（用于硬件解码，较新浏览器）

## 🎮 使用方法

1. **启动服务器**
   ```bash
   ./start.sh
   ```

2. **打开播放器**
   - 在浏览器中访问显示的地址
   - 等待播放器初始化完成

3. **加载视频**
   - 点击"📁 选择视频文件"按钮
   - 选择本地的视频文件（支持MP4, WebM等）
   - 等待文件加载完成

4. **开始播放**
   - 点击"▶️ 播放"按钮
   - 使用"⏸️ 暂停"和"⏹️ 停止"控制播放

5. **环境测试**
   - 点击"🧪 环境测试"查看浏览器功能支持情况

## 🔧 支持的功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 基础播放 | ✅ | 使用HTML5 Video API |
| WebGL渲染 | ✅ | 硬件加速渲染 |
| WebGL2渲染 | ✅ | 更好的性能 |
| AudioContext | ✅ | 音频处理 |
| Canvas 2D | ✅ | 后备渲染方案 |
| 文件API | ✅ | 本地文件加载 |
| 进度条 | ✅ | 播放进度显示 |
| 响应式布局 | ✅ | 移动端适配 |

### 高级功能（浏览器支持情况）

| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| WebGPU | ✅ (93+) | 🔄 开发中 | 🔄 开发中 | ✅ (93+) |
| WebCodecs | ✅ (94+) | 🔄 开发中 | ❌ | ✅ (94+) |
| AudioWorklet | ✅ (66+) | ✅ (76+) | ✅ (14.1+) | ✅ (79+) |
| OffscreenCanvas | ✅ (69+) | ✅ (105+) | ❌ | ✅ (79+) |
| SharedArrayBuffer | ✅* | ✅* | ✅* | ✅* |

*需要HTTPS或特殊头部设置

## 🐛 常见问题

### Q: 播放器无法启动？
A: 检查以下项目：
- Python 3 是否已安装
- 端口是否被占用
- 浏览器是否支持基本的HTML5功能

### Q: 视频无法播放？
A: 可能原因：
- 视频格式不受浏览器支持
- 视频文件损坏
- 浏览器安全策略限制

### Q: 性能不佳？
A: 优化建议：
- 使用支持硬件加速的浏览器
- 确保WebGL可用
- 选择合适的视频分辨率和码率

### Q: 音频问题？
A: 检查项目：
- 浏览器是否允许音频播放（某些浏览器需要用户交互）
- AudioContext是否正常初始化
- 系统音量设置

## 🔄 与Vite版本的区别

| 特性 | 原生版本 | Vite版本 |
|------|----------|----------|
| 启动速度 | 🚀 极快 | ⚡ 快 |
| 依赖要求 | 🔥 仅Python | 📦 Node.js + npm |
| 构建过程 | ❌ 无需构建 | ✅ 需要构建 |
| 热重载 | ❌ | ✅ |
| 代码分割 | ❌ | ✅ |
| 高级功能 | 🔧 基础版 | 🚀 完整版 |
| 兼容性 | ✅ 更好 | ⚠️ 可能有问题 |

## 📁 文件结构

```
/
├── native-player.html    # 主播放器页面
├── simple.html         # 简单测试页面
├── debug.html          # 调试诊断页面
├── server.py           # Python HTTP服务器
├── start.sh            # 启动脚本
└── NATIVE-PLAYER.md    # 说明文档
```

## 🎯 下一步计划

- [ ] 添加更多视频格式支持
- [ ] 实现音量和速度控制
- [ ] 添加全屏功能
- [ ] 支持字幕显示
- [ ] 添加播放列表功能
- [ ] 实现拖拽加载

## 💡 技术说明

这个原生版本使用了以下技术：

- **HTML5 Video API** - 核心视频播放功能
- **Canvas API** - 视频帧渲染和处理
- **Web Audio API** - 音频处理和分析
- **File API** - 本地文件读取
- **Request Animation Frame** - 流畅的渲染循环
- **原生JavaScript** - 无框架依赖

通过避免复杂的构建工具和依赖管理，这个版本提供了更稳定、更兼容的播放器体验。